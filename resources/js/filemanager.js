!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=16)}({16:function(e,t,n){e.exports=n(17)},17:function(e,t){var n=new Vue({mounted:function(){console.log("VueJS: FileManager started"),this.open($(this.$el).data("start"),!1),console.log("Directory: "+this.$data.currentDirectory)},name:"FileManager",el:"#filemanager",data:{_csrfToken:$('[name="_token"]').val(),previousDirectory:null,currentDirectory:"storage",folders:[],files:[],knownFileExtensions:["jpg","png","jpeg"],messages:[],filter:null,selected:null},watch:{filter:function(e){null!=e&&""!=e?(this.$data.folders=this.$data.folders.filter((function(t){return t.includes(e)})),this.$data.files=this.$data.files.filter((function(t){return t.includes(e)}))):this.open(this.$data.currentDirectory,!1)}},computed:{breadcrumb:function(){for(var e=this.$data.currentDirectory.split("/"),t=[],n=0;n<e.length;n++){var r=e[n],a=""+e.slice(0,n+1).join("/");t.push({text:r,link:a})}return t}},methods:{select:function(e){this.$data.selected=event.currentTarget.id,$(".file").removeClass("selected"),$(".folder").removeClass("selected"),$(event.currentTarget).addClass("selected"),console.log("Selected file: "+n.$data.selected)},open:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)var r=this.$data.currentDirectory+"/"+e;else r=e;$.ajax({url:"admin/file-manager/index",type:"GET",data:{path:r},success:function(e){n.$data.previousDirectory=n.$data.currentDirectory,n.$data.currentDirectory=e.current_dir,n.$data.folders=[],n.$data.files=[],console.log(e),void 0!==e.dirs&&e.dirs.length>0&&e.dirs.forEach((function(e){n.$data.folders.push(e)})),void 0!==e.files&&e.files.length>0&&e.files.forEach((function(e){n.$data.files.push(e)})),$(".fa-refresh").removeClass("fa-spin")},error:function(e){console.log(e)}})},newFolder:function(e){var t=this.$data.currentDirectory,r=$('[name="new_folder_name"]').val();$.post(e.target.action,{_token:n.$data._csrfToken,dir_path:t,new_folder_name:r},(function(e){void 0!==e.success?(console.log("Dir created: "+t+"/"+r),$("#new_folder").modal("hide"),$('[name="new_folder_name"]').val(""),n.$data.folders.push(r)):(console.log("Error:"),console.log(e))}))},upload:function(e){console.log("Uploading ...");var t=n.$data.currentDirectory,r=$("#input-2"),a=r[0].files,o=new FormData;o.append("_token",n.$data._csrfToken),o.append("dir_path",t);for(var l=0;l<a.length;l++){var i=a[l];o.append("up_file[]",i,i.name)}$.ajax({url:e.target.action,type:"POST",enctype:"multipart/form-data",data:o,async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){if(void 0!==e.success){console.log(e),$("#upload_file_to_storage").modal("hide"),r.val(""),r.fileinput("clear");for(var t=0;t<e.uploadedFileNames.length;t++)console.log(n.basename(e.uploadedFileNames[t])),n.$data.files.push(n.basename(e.uploadedFileNames[t])+"."+n.getFileExtension(e.uploadedFileNames[t]))}else console.log("Error"+e)},error:function(){console.log("Error in ajax form submission")}})},basename:function(e){return null!=(e=/(([^\/\\\.#\? ]+)(\.\w+)*)([?#].+)?$/.exec(e))?e[2]:""},deleteModal:function(e){var t=$("#delete_sample");$($($(t.find("div.modal-body")).find("div")).find("b")).html((function(t,r){return n.basename(e)})),t.find("a").data("file",e),t.modal("toggle")},renameModal:function(e){this.select(e);var t=$("#rename_sample");$("#selected").val(e),t.modal("toggle")},renameFile:function(e){file=n.$data.currentDirectory+"/"+$(e.target).data("old_name"),console.log(file),$.post(e.target.action,{_token:n.$data._csrfToken,old_file:n.$data.currentDirectory+"/"+$('[name="old_name"]').val(),new_file:n.$data.currentDirectory+"/"+$('[name="new_name"]').val()},(function(e){void 0!==e.success?(n.open(n.$data.currentDirectory),$("#rename_sample").modal("hide")):console.log(e)}))},deleteFile:function(e){file=n.$data.currentDirectory+"/"+$(e.target).data("file"),$.get("admin/file-manager/delete",{_token:n.$data._csrfToken,file:file},(function(t){if(void 0!==t.success){var r=n.$data.files.indexOf($(e.target).data("file"));r>-1&&n.$data.files.splice(r,1),(r=n.$data.folders.indexOf($(e.target).data("file")))>-1&&n.$data.folders.splice(r,1),$("#delete_sample").modal("hide")}else console.log(t)}))},getUrlVar:function(e,t){for(var n,r=[],a=e.slice(e.indexOf("?")+1).split("&"),o=0;o<a.length;o++)n=a[o].split("="),r.push(n[0]),r[n[0]]=n[1];return r[t]},getUrlParam:function(e){var t=new RegExp("(?:[?&]|&)"+e+"=([^&]+)","i"),n=window.location.search.match(t);return n&&n.length>1?n[1]:null},returnFileUrl:function(e){var t=e;window.opener.CKEDITOR.tools.callFunction(1,t),window.close()},getFileExtension:function(e){return e.substr(e.lastIndexOf(".")+1)},isKnownExtension:function(e){return $.inArray(this.getFileExtension(e).toLowerCase(),this.$data.knownFileExtensions)>=0}}})}});